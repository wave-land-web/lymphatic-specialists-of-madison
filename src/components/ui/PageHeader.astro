---
import type { SanityAsset } from '@sanity/image-url/lib/types/types'
import { getImage } from 'astro:assets'
import heroBackground from '../../assets/images/placeholder-3.jpg'
import { urlForImage } from '../../sanity/lib/urlForImage'

export interface Props {
  className?: string
  customHeroBackgroundImage?: SanityAsset
}

const { className, customHeroBackgroundImage } = Astro.props

let heroBackgroundImage = await getImage({ src: heroBackground, inferSize: true })

if (customHeroBackgroundImage) {
  const url = urlForImage(customHeroBackgroundImage).url()
  heroBackgroundImage = await getImage({ src: url, inferSize: true })
}
---

<header class="hero md:bg-fixed" style={`background-image: url(${heroBackgroundImage.src})`}>
  <div class="hero-overlay bg-black/60"></div>
  <div class="wrapper">
    <div
      class={`${className} flex flex-col gap-(--site-padding-md) pt-[calc(var(--site-padding-lg)+var(--nav-height))] pb-(--site-padding-lg) text-neutral-content`}
    >
      <slot />
    </div>
  </div>
</header>
