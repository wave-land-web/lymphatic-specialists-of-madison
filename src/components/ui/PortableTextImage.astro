---
import { Image, inferRemoteSize } from 'astro:assets'
import { urlForImage } from '../../sanity/lib/urlForImage'

const { asset, alt, customWidth, customHeight } = Astro.props.node // `.node` is the current node in the PortableText

const url = urlForImage(asset).auto('format').url()
const { width, height } = await inferRemoteSize(url)
---

<Image src={url} alt={alt} width={customWidth || width} height={customHeight || height} />
